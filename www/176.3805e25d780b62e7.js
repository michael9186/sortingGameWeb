"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[176],{6176:(ze,L,j)=>{j.r(L),j.d(L,{HomePage:()=>ce});var D=j(467),V=j(177),F=j(3528);class J{constructor(y,C,t,r,a){this.id=y,this.value=C,this.selected=t,this.pinned=r,this.finalized=a}}var $={};!function _(y,C,t,r){var a=!!(y.Worker&&y.Blob&&y.Promise&&y.OffscreenCanvas&&y.OffscreenCanvasRenderingContext2D&&y.HTMLCanvasElement&&y.HTMLCanvasElement.prototype.transferControlToOffscreen&&y.URL&&y.URL.createObjectURL),s="function"==typeof Path2D&&"function"==typeof DOMMatrix,o=function(){if(!y.OffscreenCanvas)return!1;var n=new OffscreenCanvas(1,1),e=n.getContext("2d");e.fillRect(0,0,1,1);var l=n.transferToImageBitmap();try{e.createPattern(l,"no-repeat")}catch{return!1}return!0}();function p(){}function h(n){var e=C.exports.Promise,l=void 0!==e?e:y.Promise;return"function"==typeof l?new l(n):(n(p,p),null)}var e,l,n,d,u,H,v=function(n,e){return{transform:function(l){if(n)return l;if(e.has(l))return e.get(l);var d=new OffscreenCanvas(l.width,l.height);return d.getContext("2d").drawImage(l,0,0),e.set(l,d),d},clear:function(){e.clear()}}}(o,new Map),k=(n=Math.floor(16.666666666666668),d={},u=0,"function"==typeof requestAnimationFrame&&"function"==typeof cancelAnimationFrame?(e=function(f){var m=Math.random();return d[m]=requestAnimationFrame(function c(g){u===g||u+n-1<g?(u=g,delete d[m],f()):d[m]=requestAnimationFrame(c)}),m},l=function(f){d[f]&&cancelAnimationFrame(d[f])}):(e=function(f){return setTimeout(f,n)},l=function(f){return clearTimeout(f)}),{frame:e,cancel:l}),B=function(){var n,e,l={};return function(){if(n)return n;if(!t&&a){var u=["var CONFETTI, SIZE = {}, module = {};","("+_.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join("\n");try{n=new Worker(URL.createObjectURL(new Blob([u])))}catch(f){return void 0!==typeof console&&"function"==typeof console.warn&&console.warn("\u{1f38a} Could not load worker",f),null}!function d(u){function f(m,c){u.postMessage({options:m||{},callback:c})}u.init=function(c){var g=c.transferControlToOffscreen();u.postMessage({canvas:g},[g])},u.fire=function(c,g,M){if(e)return f(c,null),e;var P=Math.random().toString(36).slice(2);return e=h(function(w){function S(x){x.data.callback===P&&(delete l[P],u.removeEventListener("message",S),e=null,v.clear(),M(),w())}u.addEventListener("message",S),f(c,P),l[P]=S.bind(null,{data:{callback:P}})})},u.reset=function(){for(var c in u.postMessage({reset:!0}),l)l[c](),delete l[c]}}(n)}return n}}(),O={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function I(n,e,l){return function de(n,e){return e?e(n):n}(n&&function he(n){return null!=n}(n[e])?n[e]:O[e],l)}function ue(n){return n<0?0:Math.floor(n)}function fe(n,e){return Math.floor(Math.random()*(e-n))+n}function G(n){return parseInt(n,16)}function pe(n){return n.map(me)}function me(n){var e=String(n).replace(/[^0-9a-f]/gi,"");return e.length<6&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),{r:G(e.substring(0,2)),g:G(e.substring(2,4)),b:G(e.substring(4,6))}}function ve(n){n.width=document.documentElement.clientWidth,n.height=document.documentElement.clientHeight}function be(n){var e=n.getBoundingClientRect();n.width=e.width,n.height=e.height}function ye(n){var e=n.angle*(Math.PI/180),l=n.spread*(Math.PI/180);return{x:n.x,y:n.y,wobble:10*Math.random(),wobbleSpeed:Math.min(.11,.1*Math.random()+.05),velocity:.5*n.startVelocity+Math.random()*n.startVelocity,angle2D:-e+(.5*l-Math.random()*l),tiltAngle:(.5*Math.random()+.25)*Math.PI,color:n.color,shape:n.shape,tick:0,totalTicks:n.ticks,decay:n.decay,drift:n.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:3*n.gravity,ovalScalar:.6,scalar:n.scalar,flat:n.flat}}function W(n,e){var w,l=!n,d=!!I(e||{},"resize"),u=!1,f=I(e,"disableForReducedMotion",Boolean),c=a&&I(e||{},"useWorker")?B():null,g=l?ve:be,M=!(!n||!c||!n.__confetti_initialized),P="function"==typeof matchMedia&&matchMedia("(prefers-reduced-motion)").matches;function S(b,T,A){for(var R=I(b,"particleCount",ue),z=I(b,"angle",Number),N=I(b,"spread",Number),E=I(b,"startVelocity",Number),Ie=I(b,"decay",Number),xe=I(b,"gravity",Number),Fe=I(b,"drift",Number),Y=I(b,"colors",pe),Te=I(b,"ticks",Number),Z=I(b,"shapes"),Oe=I(b,"scalar"),Ae=!!I(b,"flat"),K=function ge(n){var e=I(n,"origin",Object);return e.x=I(e,"x",Number),e.y=I(e,"y",Number),e}(b),Q=R,U=[],Re=n.width*K.x,Ee=n.height*K.y;Q--;)U.push(ye({x:Re,y:Ee,angle:z,spread:N,startVelocity:E,color:Y[Q%Y.length],shape:Z[fe(0,Z.length)],ticks:Te,decay:Ie,gravity:xe,drift:Fe,scalar:Oe,flat:Ae}));return w?w.addFettis(U):(w=function _e(n,e,l,d,u){var c,g,f=e.slice(),m=n.getContext("2d"),M=h(function(P){function w(){c=g=null,m.clearRect(0,0,d.width,d.height),v.clear(),u(),P()}c=k.frame(function S(){t&&!(d.width===r.width&&d.height===r.height)&&(d.width=n.width=r.width,d.height=n.height=r.height),!d.width&&!d.height&&(l(n),d.width=n.width,d.height=n.height),m.clearRect(0,0,d.width,d.height),(f=f.filter(function(x){return function we(n,e){e.x+=Math.cos(e.angle2D)*e.velocity+e.drift,e.y+=Math.sin(e.angle2D)*e.velocity+e.gravity,e.velocity*=e.decay,e.flat?(e.wobble=0,e.wobbleX=e.x+10*e.scalar,e.wobbleY=e.y+10*e.scalar,e.tiltSin=0,e.tiltCos=0,e.random=1):(e.wobble+=e.wobbleSpeed,e.wobbleX=e.x+10*e.scalar*Math.cos(e.wobble),e.wobbleY=e.y+10*e.scalar*Math.sin(e.wobble),e.tiltAngle+=.1,e.tiltSin=Math.sin(e.tiltAngle),e.tiltCos=Math.cos(e.tiltAngle),e.random=Math.random()+2);var l=e.tick++/e.totalTicks,d=e.x+e.random*e.tiltCos,u=e.y+e.random*e.tiltSin,f=e.wobbleX+e.random*e.tiltCos,m=e.wobbleY+e.random*e.tiltSin;if(n.fillStyle="rgba("+e.color.r+", "+e.color.g+", "+e.color.b+", "+(1-l)+")",n.beginPath(),s&&"path"===e.shape.type&&"string"==typeof e.shape.path&&Array.isArray(e.shape.matrix))n.fill(function ke(n,e,l,d,u,f,m){var c=new Path2D(n),g=new Path2D;g.addPath(c,new DOMMatrix(e));var M=new Path2D;return M.addPath(g,new DOMMatrix([Math.cos(m)*u,Math.sin(m)*u,-Math.sin(m)*f,Math.cos(m)*f,l,d])),M}(e.shape.path,e.shape.matrix,e.x,e.y,.1*Math.abs(f-d),.1*Math.abs(m-u),Math.PI/10*e.wobble));else if("bitmap"===e.shape.type){var c=Math.PI/10*e.wobble,g=.1*Math.abs(f-d),M=.1*Math.abs(m-u),P=e.shape.bitmap.width*e.scalar,w=e.shape.bitmap.height*e.scalar,S=new DOMMatrix([Math.cos(c)*g,Math.sin(c)*g,-Math.sin(c)*M,Math.cos(c)*M,e.x,e.y]);S.multiplySelf(new DOMMatrix(e.shape.matrix));var x=n.createPattern(v.transform(e.shape.bitmap),"no-repeat");x.setTransform(S),n.globalAlpha=1-l,n.fillStyle=x,n.fillRect(e.x-P/2,e.y-w/2,P,w),n.globalAlpha=1}else if("circle"===e.shape)n.ellipse?n.ellipse(e.x,e.y,Math.abs(f-d)*e.ovalScalar,Math.abs(m-u)*e.ovalScalar,Math.PI/10*e.wobble,0,2*Math.PI):function Me(n,e,l,d,u,f,m,c,g){n.save(),n.translate(e,l),n.rotate(f),n.scale(d,u),n.arc(0,0,1,m,c,g),n.restore()}(n,e.x,e.y,Math.abs(f-d)*e.ovalScalar,Math.abs(m-u)*e.ovalScalar,Math.PI/10*e.wobble,0,2*Math.PI);else if("star"===e.shape)for(var b=Math.PI/2*3,T=4*e.scalar,A=8*e.scalar,R=e.x,z=e.y,N=5,E=Math.PI/N;N--;)R=e.x+Math.cos(b)*A,z=e.y+Math.sin(b)*A,n.lineTo(R,z),b+=E,R=e.x+Math.cos(b)*T,z=e.y+Math.sin(b)*T,n.lineTo(R,z),b+=E;else n.moveTo(Math.floor(e.x),Math.floor(e.y)),n.lineTo(Math.floor(e.wobbleX),Math.floor(u)),n.lineTo(Math.floor(f),Math.floor(m)),n.lineTo(Math.floor(d),Math.floor(e.wobbleY));return n.closePath(),n.fill(),e.tick<e.totalTicks}(m,x)})).length?c=k.frame(S):w()}),g=w});return{addFettis:function(P){return f=f.concat(P),M},canvas:n,promise:M,reset:function(){c&&k.cancel(c),g&&g()}}}(n,U,g,T,A),w.promise)}function x(b){var T=f||I(b,"disableForReducedMotion",Boolean),A=I(b,"zIndex",Number);if(T&&P)return h(function(E){E()});l&&w?n=w.canvas:l&&!n&&(n=function Ce(n){var e=document.createElement("canvas");return e.style.position="fixed",e.style.top="0px",e.style.left="0px",e.style.pointerEvents="none",e.style.zIndex=n,e}(A),document.body.appendChild(n)),d&&!M&&g(n);var R={width:n.width,height:n.height};function z(){if(c){var E={getBoundingClientRect:function(){if(!l)return n.getBoundingClientRect()}};return g(E),void c.postMessage({resize:{width:E.width,height:E.height}})}R.width=R.height=null}function N(){w=null,d&&(u=!1,y.removeEventListener("resize",z)),l&&n&&(document.body.contains(n)&&document.body.removeChild(n),n=null,M=!1)}return c&&!M&&c.init(n),M=!0,c&&(n.__confetti_initialized=!0),d&&!u&&(u=!0,y.addEventListener("resize",z,!1)),c?c.fire(b,R,N):S(b,R,N)}return x.reset=function(){c&&c.reset(),w&&w.reset()},x}function X(){return H||(H=W(null,{useWorker:!0,resize:!0})),H}C.exports=function(){return X().apply(this,arguments)},C.exports.reset=function(){X().reset()},C.exports.create=W,C.exports.shapeFromPath=function Pe(n){if(!s)throw new Error("path confetti are not supported in this browser");var e,l;"string"==typeof n?e=n:(e=n.path,l=n.matrix);var d=new Path2D(e),f=document.createElement("canvas").getContext("2d");if(!l){for(var w,S,m=1e3,c=m,g=m,M=0,P=0,x=0;x<m;x+=2)for(var b=0;b<m;b+=2)f.isPointInPath(d,x,b,"nonzero")&&(c=Math.min(c,x),g=Math.min(g,b),M=Math.max(M,x),P=Math.max(P,b));w=M-c,S=P-g;var A=Math.min(10/w,10/S);l=[A,0,0,A,-Math.round(w/2+c)*A,-Math.round(S/2+g)*A]}return{type:"path",path:e,matrix:l}},C.exports.shapeFromText=function Se(n){var e,l=1,d="#000000",u='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';"string"==typeof n?e=n:(e=n.text,l="scalar"in n?n.scalar:l,u="fontFamily"in n?n.fontFamily:u,d="color"in n?n.color:d);var f=10*l,m=f+"px "+u,c=new OffscreenCanvas(f,f),g=c.getContext("2d");g.font=m;var M=g.measureText(e),P=Math.ceil(M.actualBoundingBoxRight+M.actualBoundingBoxLeft),w=Math.ceil(M.actualBoundingBoxAscent+M.actualBoundingBoxDescent),x=M.actualBoundingBoxLeft+2,b=M.actualBoundingBoxAscent+2;P+=4,w+=4,(g=(c=new OffscreenCanvas(P,w)).getContext("2d")).font=m,g.fillStyle=d,g.fillText(e,x,b);var T=1/l;return{type:"bitmap",bitmap:c.transferToImageBitmap(),matrix:[T,0,0,T,-P*T/2,-w*T/2]}}}(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),$,!1);const q=$.exports;var i=j(4438),ee=j(4284),te=j(1626);const ne=["cardContainer"],re=_=>({finalized:_});function ie(_,y){1&_&&i.nrm(0,"ion-icon",21)}function ae(_,y){1&_&&i.nrm(0,"ion-icon",22)}function se(_,y){if(1&_){const C=i.RV6();i.j41(0,"ion-button",23),i.bIt("click",function(r){i.eBV(C);const a=i.XpG().index,s=i.XpG();return i.Njj(s.pinCard(r,a))}),i.nrm(1,"ion-icon",24),i.k0s()}if(2&_){const C=i.XpG().index,t=i.XpG();i.R7$(),i.Y8G("name",t.getPinButtonIcon(C))}}function oe(_,y){if(1&_&&(i.j41(0,"div",25)(1,"p",26),i.EFF(2),i.k0s()()),2&_){const C=i.XpG().$implicit;i.R7$(2),i.JRh(C.value)}}function le(_,y){if(1&_){const C=i.RV6();i.j41(0,"ion-col",13)(1,"div",14),i.DNE(2,ie,1,0,"ion-icon",15),i.j41(3,"p"),i.EFF(4),i.k0s()(),i.j41(5,"ion-card",16),i.bIt("click",function(){const r=i.eBV(C).index,a=i.XpG();return i.Njj(a.flipCard(r))}),i.j41(6,"ion-button",17),i.bIt("click",function(r){const a=i.eBV(C).index,s=i.XpG();return i.Njj(s.finalizeCard(r,a))}),i.DNE(7,ae,1,0,"ion-icon",18),i.k0s(),i.DNE(8,se,2,1,"ion-button",19)(9,oe,3,1,"div",20),i.k0s()()}if(2&_){const C=y.$implicit,t=y.index,r=i.XpG();i.R7$(2),i.Y8G("ngIf",r.insertionSortCurrentIndex==t+1&&2===r.selectedMode),i.R7$(2),i.SpI("[",t+1,"]"),i.R7$(),i.Y8G("id","card-"+t)("ngClass",i.eq3(7,re,C.finalized)),i.R7$(2),i.Y8G("ngIf",!C.finalized||0===r.selectedMode),i.R7$(),i.Y8G("ngIf",C.selected),i.R7$(),i.Y8G("ngIf",C.selected)}}let ce=(()=>{var _;class y{constructor(t,r,a,s){this.sharedService=t,this.animationControl=r,this.alertController=a,this.http=s,this.selectedMode=this.sharedService.gameModes[0].id,this.selectedNumberOfCards=this.sharedService.numberOfCards.min,this.selectedValueType=this.sharedService.valueTypes[0].id,this.selectedValueDistribution=this.sharedService.valueDistributions[0].id,this.selectedWorkshopMode=this.sharedService.workshopModes[0].id,this.cards=[],this.originalCards=[],this.actions=[],this.comparisons=0,this.swaps=0,this.errors=0,this.numberofFinalizedCards=0,this.startTime=Date.now(),this.finishTime=0,this.topRowCount=0,this.insertionSortCurrentIndex=1,this.disableFlipping=!1,this.playerName="",this.baseUrl="https://cardgame.oida.synology.me"}ngOnInit(){this.subscribeToSharedService()}subscribeToSharedService(){this.sharedService.selectedMode$.subscribe(t=>{this.selectedMode=t,this.restartGame(!1)}),this.sharedService.selectedNumberOfCards$.subscribe(t=>{this.selectedNumberOfCards=t,this.restartGame(!1)}),this.sharedService.selectedValueType$.subscribe(t=>{this.selectedValueType=t,this.restartGame(!1)}),this.sharedService.selectedValueDistribution$.subscribe(t=>{this.selectedValueDistribution=t,this.restartGame(!1)}),this.sharedService.selectedWorkshopModes$.subscribe(t=>{this.selectedWorkshopMode=t})}launchConfetti(){let t=1;0===this.errors&&(t=3);for(let r=0;r<t;r++)setTimeout(()=>{q({particleCount:300,spread:180,startVelocity:20,origin:{x:.5,y:1.5},decay:.96,gravity:.3})},700*r)}generateCards(){this.originalCards=[];const t=new Set;for(let r=0;r<this.selectedNumberOfCards;r++)this.originalCards.push(new J(r,this.getCardValue(t),!1,!1,!1));this.cards=structuredClone(this.originalCards),this.calculateRowDistribution(),this.generateActions()}getCardValue(t){let r;if(0===this.selectedValueType)if(0===this.selectedValueDistribution)do{r=(Math.floor(Math.random()*this.selectedNumberOfCards)+1).toString()}while(t.has(r));else do{r=Math.floor(100*Math.random()).toString()}while(t.has(r));else if(0===this.selectedValueDistribution)do{r=String.fromCharCode(Math.floor(Math.random()*this.selectedNumberOfCards)+65)}while(t.has(r));else do{r=String.fromCharCode(65+Math.floor(26*Math.random()))}while(t.has(r));return t.add(r),r}checkAction(t,r){if(0===this.selectedMode)return!0;{let a=!1;const s=this.actions[0];if(s&&s.type===t){let o=[];if("swap"===s.type){const p=[...r].sort();a=s.ids.some(h=>{const v=h.sort();let k=v[0]===p[0]&&v[1]===p[1];return k||o.push(h),k})}else o=s.ids.filter(p=>p!==r),a=s.ids.includes(r);return o.length>0?s.ids=o:this.actions.shift(),a||this.presentMistakeAlert(s.type,s.ids),a}return s&&this.presentMistakeAlert(s.type,s.ids),!1}}presentMistakeAlert(t,r){var a=this;return(0,D.A)(function*(){let s="";if("open"===t)for(let h=0;h<r.length;h++)s+="Die Karte an Position ["+(r[h]+1)+"] muss ge\xf6ffnet werden. </br> ";else if("checkmark"===t)for(let h=0;h<r.length;h++)s+="Die Karte an Position ["+(r[h]+1)+"] muss als gel\xf6st markiert werden. </br> ";else if("swap"===t)for(let h=0;h<r.length;h++)s+="Die offenen Karten m\xfcssen getauscht werden. </br>";else if("pin"===t)for(let h=0;h<r.length;h++)s+="Die Karte an Position ["+(r[h]+1)+"] muss festgetackert werden. </br> ";let o="Folgende Aktion ist erlaubt:";r.length>1&&(o="Folgende Aktionen sind erlaubt:"),yield(yield a.alertController.create({header:o,message:s,buttons:["Ok"]})).present()})()}presentFinishedAlert(){var t=this;return(0,D.A)(function*(){var r;let a=(t.finishTime-t.startTime)/1e3,s="Sortieralgorithmus: "+(null===(r=t.sharedService.gameModes.find(o=>o.id===t.selectedMode))||void 0===r?void 0:r.title)+"<br> Zeit: "+a.toFixed(2)+" Sekunden";0===t.selectedWorkshopMode?yield(yield t.alertController.create({header:"Herzlichen Gl\xfcckwunsch!",subHeader:"Du hast das Spiel erfolgreich gel\xf6st!",message:s,buttons:["Ok"]})).present():yield(yield t.alertController.create({header:"Herzlichen Gl\xfcckwunsch!",subHeader:"Du hast das Spiel erfolgreich gel\xf6st!",message:s,backdropDismiss:!1,inputs:[{name:"name",type:"text",value:t.playerName,placeholder:"Dein Name"}],buttons:[{text:"Abbrechen",role:"cancel"},{text:"Senden",handler:p=>{var h,v,k;t.playerName=p.name;let B={name:p.name,comparisons:t.comparisons,swaps:t.swaps,errors:t.errors,time:a,mode:null===(h=t.sharedService.gameModes.find(O=>O.id===t.selectedMode))||void 0===h?void 0:h.title,numberofcards:t.selectedNumberOfCards,valuetype:null===(v=t.sharedService.valueTypes.find(O=>O.id===t.selectedValueType))||void 0===v?void 0:v.title,valuedistribution:null===(k=t.sharedService.valueDistributions.find(O=>O.id===t.selectedValueDistribution))||void 0===k?void 0:k.title};t.http.post(t.baseUrl+"/submission",B).subscribe(O=>{console.log(O)})}}]})).present()})()}presentUnsortedCardsAlert(t){var r=this;return(0,D.A)(function*(){let a="";console.log(t);for(let o=0;o<t.length;o++)a+="Die Karte an Position ["+(t[o]+1)+"] ist nicht an der richtigen Stelle. </br>";yield(yield r.alertController.create({header:"Folgende Fehler wurden gefunden:",message:a,buttons:["Ok"]})).present()})()}flipCard(t){if(!this.disableFlipping){if(!this.checkAction("open",t))return void this.errors++;if(!this.cards[t].finalized){this.insertionSortCurrentIndex=Math.max(t+1,this.insertionSortCurrentIndex);let r=this.getSelectedCardIndizes(),a=this.getPinnedCardIndex();this.cards[t].selected?1==r.size?r.has(a)||this.unflipCards():r.has(a)?(this.unflipCards(),this.cards[a].selected=!0):(this.unflipCards(),this.cards[t].selected=!0):r.size<2?(this.cards[t].selected=!0,1==r.size&&this.comparisons++):r.has(a)?(this.unflipCards(),this.cards[a].selected=!0,this.cards[t].selected=!0,this.comparisons++):(this.unflipCards(),this.cards[t].selected=!0)}}}finalizeCard(t,r){if(t.stopPropagation(),this.checkAction("checkmark",r)){if(this.cards[r].finalized?(this.cards[r].finalized=!1,this.numberofFinalizedCards--):(this.cards[r].finalized=!0,this.numberofFinalizedCards++),this.unpinCard(),this.unflipCards(),this.numberofFinalizedCards===this.cards.length){let a=[];if(0===this.selectedMode){let s=this.originalCards.map(o=>o.value).sort();for(let o=0;o<this.cards.length;o++)this.cards[o].value!=s[o]&&a.push(o)}a.length>0?this.presentUnsortedCardsAlert(a):(this.finishTime=Date.now(),this.launchConfetti(),this.presentFinishedAlert())}}else this.errors++}pinCard(t,r){if(t.stopPropagation(),!this.checkAction("pin",r))return void this.errors++;let a=this.getPinnedCardIndex();a!=r?(a>=0&&a<this.cards.length&&(this.cards[a].pinned=!1),this.cards[r].pinned=!0):this.unpinCard()}swapCards(){var t=this;return(0,D.A)(function*(){const[r,a]=[...t.getSelectedCardIndizes()];if(!t.checkAction("swap",[r,a]))return void t.errors++;const s=t.cardContainer.nativeElement.querySelector("#card-"+r),o=t.cardContainer.nativeElement.querySelector("#card-"+a),p=null==s?void 0:s.getBoundingClientRect(),h=null==o?void 0:o.getBoundingClientRect();if(s&&o&&p&&h){t.disableFlipping=!0,t.unpinCard();const v=t.animationControl.create().addElement(s).duration(500).to("transform",`translate(${h.left-p.left}px, ${h.top-p.top}px)`),k=t.animationControl.create().addElement(o).duration(500).to("transform",`translate(${p.left-h.left}px, ${p.top-h.top}px)`);yield Promise.all([v.play(),k.play()]),t.unflipCards();const B=t.animationControl.create().addElement(s).duration(0).to("transform","translate(0, 0)"),O=t.animationControl.create().addElement(o).duration(0).to("transform","translate(0, 0)");yield Promise.all([B.play(),O.play()]),t.disableFlipping=!1,[t.cards[r],t.cards[a]]=[t.cards[a],t.cards[r]],t.swaps++}else console.log("Cards not found")})()}restartGame(t){this.resetTrackingStatistics(),t?(this.cards=structuredClone(this.originalCards),this.generateActions(),this.unpinCard()):(this.generateCards(),this.unpinCard())}unflipCards(){this.getSelectedCardIndizes().forEach(t=>this.cards[t].selected=!1)}unpinCard(){let t=this.getPinnedCardIndex();t>=0&&t<this.cards.length&&(this.cards[t].pinned=!1)}getPinButtonIcon(t){return this.cards[t].pinned?"radio-button-on":"radio-button-off"}resetTrackingStatistics(){this.comparisons=0,this.swaps=0,this.errors=0,this.insertionSortCurrentIndex=1,this.numberofFinalizedCards=0,this.startTime=Date.now()}getSelectedCardIndizes(){let t=new Set;return this.cards.forEach((r,a)=>{r.selected&&t.add(a)}),t}getPinnedCardIndex(){return this.cards.findIndex(t=>t.pinned)}calculateRowDistribution(){const t=this.cards.length;this.topRowCount=t<=6?t:Math.ceil(t/2),document.documentElement.style.setProperty("--top-row-count",this.topRowCount.toString())}generateActions(){this.actions=[],1===this.selectedMode?this.actions=this.generateBubbleSortActions():2===this.selectedMode?this.actions=this.generateInsertionSortActions():3===this.selectedMode&&(this.actions=this.generateSelectionSortActions())}generateBubbleSortActions(){const t=[],r=this.getCardValues();let s,a=this.cards.length-1;do{s=!1;for(let o=0;o<a;o++)t.push({type:"open",ids:[o,o+1]}),r[o]>r[o+1]&&(t.push({type:"swap",ids:[[o,o+1]]}),[r[o],r[o+1]]=[r[o+1],r[o]],s=!0);a--,t.push({type:"checkmark",ids:[a+1]})}while(s);for(;a>=0;)t.push({type:"checkmark",ids:[a]}),a--;return this.compressActions(t)}generateInsertionSortActions(){const t=[],r=this.getCardValues();let a=this.cards.length;for(let s=1;s<a;s++){let o=r[s],p=s-1;for(t.push({type:"open",ids:[s,p]});r[p]>o&&p>=0;)t.push({type:"swap",ids:[[p,p+1]]}),r[p+1]=r[p],p--,p>=0&&t.push({type:"open",ids:[p,p+1]});r[p+1]=o}for(let s=0;s<a;s++)t.push({type:"checkmark",ids:[s]});return this.compressActions(t)}generateSelectionSortActions(){const t=[],r=this.getCardValues();let a=r.length,s=0,o=-1,p=-1,h=-1;for(let v=0;v<a-1;v++){t.push({type:"open",ids:[v]}),o=-1,p=h,h=v;for(let k=v+1;k<a;k++)t.push({type:"open",ids:[k]}),p=-1!==o?o:h,h=k,k===v+1?(s=r[v]<=r[k]?v:k,t.push({type:"pin",ids:[s]}),o=s):r[s]>r[k]&&(s=k,t.push({type:"pin",ids:[s]}),o=s);s!==v&&(h!==v&&p!==v&&t.push({type:"open",ids:[v]}),t.push({type:"swap",ids:[[v,s]]}),[r[v],r[s]]=[r[s],r[v]]),t.push({type:"checkmark",ids:[v]})}return t.push({type:"checkmark",ids:[a-1]}),this.compressActions(t)}compressActions(t){const r=[];for(let a=0;a<t.length;a++){const s=t[a];if("checkmark"===s.type){const o=r[r.length-1];o&&"checkmark"===o.type?o.ids=[...o.ids,...s.ids]:r.push(s)}else if(3===this.selectedMode&&"open"===s.type){const o=r[r.length-1],p=this.findLastIndex(r,v=>"pin"===v.type),h=this.findLastIndex(r,v=>"swap"===v.type);o&&"open"===o.type&&h>=p?o.ids=[...o.ids,...s.ids]:r.push(s)}else r.push(s)}return r}getCardValues(){return this.cards.map(0===this.selectedValueType?t=>Number(t.value):t=>t.value)}findLastIndex(t,r){for(let a=t.length-1;a>=0;a--)if(r(t[a],a,t))return a;return-1}}return(_=y).\u0275fac=function(t){return new(t||_)(i.rXU(ee.d),i.rXU(F.Hx),i.rXU(F.hG),i.rXU(te.Qq))},_.\u0275cmp=i.VBU({type:_,selectors:[["app-home"]],viewQuery:function(t,r){if(1&t&&i.GBs(ne,5),2&t){let a;i.mGM(a=i.lsd())&&(r.cardContainer=a.first)}},standalone:!0,features:[i.aNF],decls:35,vars:7,consts:[["cardContainer",""],[3,"translucent"],["slot","start"],["slot","end",1,"gc"],[3,"click"],["slot","icon-only","name","play-skip-back"],["slot","icon-only","name","reload"],[3,"fullscreen"],["class","card-col",4,"ngFor","ngForOf"],[1,"footer-toolbar"],[1,"footer-text","center-text"],[1,"center-col"],[3,"click","disabled"],[1,"card-col"],[1,"card-index"],["class","insertionsort-dot","name","ellipse",4,"ngIf"],[3,"click","id","ngClass"],["fill","clear",1,"card-button",3,"click"],["name","checkmark",4,"ngIf"],["fill","clear","class","card-button pin-button",3,"click",4,"ngIf"],["class","center-text",4,"ngIf"],["name","ellipse",1,"insertionsort-dot"],["name","checkmark"],["fill","clear",1,"card-button","pin-button",3,"click"],[3,"name"],[1,"center-text"],[1,"card-content"]],template:function(t,r){if(1&t){const a=i.RV6();i.j41(0,"ion-header",1)(1,"ion-toolbar")(2,"ion-buttons",2),i.nrm(3,"ion-menu-button"),i.k0s(),i.j41(4,"ion-title"),i.EFF(5,"Sortierspiel"),i.k0s(),i.j41(6,"ion-buttons",3)(7,"ion-button",4),i.bIt("click",function(){return i.eBV(a),i.Njj(r.restartGame(!0))}),i.EFF(8," Zur\xfccksetzen "),i.nrm(9,"ion-icon",5),i.k0s(),i.j41(10,"ion-button",4),i.bIt("click",function(){return i.eBV(a),i.Njj(r.restartGame(!1))}),i.EFF(11," Neue Karten "),i.nrm(12,"ion-icon",6),i.k0s()()()(),i.j41(13,"ion-content",7)(14,"div",null,0)(16,"ion-grid")(17,"ion-row"),i.DNE(18,le,10,9,"ion-col",8),i.k0s(),i.nrm(19,"ion-row"),i.k0s()()(),i.j41(20,"ion-footer")(21,"ion-toolbar",9)(22,"ion-row",10)(23,"ion-col")(24,"ion-title"),i.EFF(25),i.k0s()(),i.j41(26,"ion-col")(27,"ion-title"),i.EFF(28),i.k0s()(),i.j41(29,"ion-col")(30,"ion-title"),i.EFF(31),i.k0s()(),i.j41(32,"ion-col",11)(33,"ion-button",12),i.bIt("click",function(){return i.eBV(a),i.Njj(r.swapCards())}),i.EFF(34,"Karten tauschen"),i.k0s()()()()()}2&t&&(i.Y8G("translucent",!0),i.R7$(13),i.Y8G("fullscreen",!0),i.R7$(5),i.Y8G("ngForOf",r.cards),i.R7$(7),i.SpI("Verglichen: ",r.comparisons,""),i.R7$(3),i.SpI("Getauscht: ",r.swaps,""),i.R7$(3),i.SpI("Fehler: ",r.errors,""),i.R7$(2),i.Y8G("disabled",2!=r.getSelectedCardIndizes().size))},dependencies:[V.MD,V.YU,V.Sq,V.bT,F.eU,F.M0,F.ai,F.QW,F.MC,F.BC,F.W9,F.b_,F.lO,F.ln,F.hU,F.Jm,F.iq],styles:["ion-menu-button[_ngcontent-%COMP%]{color:var(--ion-color-primary)}#container[_ngcontent-%COMP%]{text-align:center;position:absolute;left:0;right:0;top:50%;transform:translateY(-50%)}#container[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:20px;line-height:26px}#container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;line-height:22px;color:#8c8c8c;margin:0}#container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}.card-content[_ngcontent-%COMP%]{font-size:26px;line-height:32px;margin:0}ion-card[_ngcontent-%COMP%]{height:23vh;margin-bottom:0;margin-inline:0px;margin-top:3px}.center-text[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;text-align:center}.center-col[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%}.thin-row[_ngcontent-%COMP%]{max-height:10vh}.card-button[_ngcontent-%COMP%]{--padding-top: 0;--padding-bottom: 0;--padding-start: 0;--padding-end: 0;padding-top:3%;padding-left:3%;padding-right:3%;margin-inline:0;margin-top:0;margin-bottom:0;min-height:0;font-size:20px}.finalized[_ngcontent-%COMP%]{background-color:#005a00}.footer-text[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{font-size:1rem}.footer-toolbar[_ngcontent-%COMP%]{--min-height: 40px}ion-col.card-col[_ngcontent-%COMP%]{flex:0 0 calc(100% / var(--top-row-count))}ion-card[_ngcontent-%COMP%]{width:100%}div.card-index[_ngcontent-%COMP%]{text-align:center;margin:0;padding:0}p[_ngcontent-%COMP%]{margin:0;padding:0}.gc[_ngcontent-%COMP%]{width:45%}.gc[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{width:50%}.pin-button[_ngcontent-%COMP%]{float:right}.insertionsort-dot[_ngcontent-%COMP%]{float:left;color:red}"]}),y})()}}]);